/*
 * File name          : Server.js
 * Author             : Hayato Doi
 * Last Update        : 2016/10/29
 * Since              : 2016/10/28
 * Outline            : main関数のあるファイル。
 * Update information : --
 * Copyright (c) 2016, Hayato Doi
 */
var Config = require('./Config.json');
var Server = require('http').createServer();
var fs = require('fs');
// *サーバの起動
Server.on('request', function(req, res){
	console.log(__dirname + '/Views' + req.url);
	// *!! ディレクトリトラバーサル !!
	fs.readFile( __dirname + '/Views' + req.url , 'utf-8', function(err, data){
		if(err){
			res.writeHead(404, {'Content-Type': 'text/plain'});
			res.write("Not Found");
			console.table(err);
			return res.end();　
		}
		res.writeHead(200, {'Content-Type': 'text/html'});
		res.write(data);
		res.end();
	});
});
/* __main__ */
Server.listen(Config.Port,Config.Address);
